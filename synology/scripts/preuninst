#!/bin/bash
#
# MoviePilot SPK - 卸载前脚本
# 停止并移除 Docker 容器（保留配置数据）
#

PACKAGE_NAME="MoviePilot"
PACKAGE_DIR="/var/packages/${PACKAGE_NAME}/target"
CONTAINER_NAME="moviepilot-mod"

echo "正在停止 MoviePilot 容器..."

# 停止并移除容器
if docker ps -a --format '{{.Names}}' | grep -q "^${CONTAINER_NAME}$"; then
    docker stop "$CONTAINER_NAME" 2>/dev/null || true
    docker rm "$CONTAINER_NAME" 2>/dev/null || true
    echo "容器已移除"
fi

# 注意：不删除配置目录和用户数据
echo "配置数据已保留，如需清理请手动删除配置目录"

exit 0
